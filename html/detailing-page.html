<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Preload CSS -->
    <link rel="preload" href="/css/styles.css" as="style">
    <link rel="preload" href="/css/detailing-page.css" as="style">


    <meta name="description" content="Curbside Customs is a mobile car detailing service in BC. Get quality care right at your curb.">
    <meta name="keywords" content="curbside customs, car detailing Burnaby, mobile detailing, car mods, car service BC">
    <meta name="author" content="Curbside Customs">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curbside Customs</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/detailing-page.css">
    <link rel="icon" type="image/png" href="../images/cc-svgrepo-com.svg">
</head>
<body class="detailing-page">
    <header>
        <h1>Full Detail</h1>
        <div id="home-icon">
            <a href="../index.html"><img src="../images/home.png" alt="Home Icon"></a>
        </div>
        <span class="menu-toggle" id="hamburger-icon">&#9776;</span>
    </header>

    <!-- Hamburger Menu Overlay -->
<div id="hamburger-overlay">
  <div id="hamburger-menu">
    <a href="../index.html">Home</a>
    <a href="../html/detailing-page.html">Detail</a>
    <a href="../html/about.html">About</a>
    <a href="../html/contact.html">Contact us</a>
  </div>
</div>


    <!-- Wash Services Section -->
    <div class="wash-services">
        <div class="card">
            <img src="../images/detailing.png" alt="Exterior Wash Icon" class="card-icon">
            <div class="card-content">
                <h2>What's Included?</h2>
                <p>
                    Our Full Car Detailing service deep cleans and restores your vehicle inside and out, leaving it looking and feeling brand new.
                    <br><br>
                    ‚úÖ Exterior: Hand wash, decontamination, machine polish, and wax/sealant for a flawless shine and protection.<br>
                    ‚úÖ Interior: Deep vacuuming, stain removal, steam cleaning, and UV protection for a fresh, spotless cabin.<br>
                    ‚úÖ Wheels & Tires: Thorough cleaning and dressing for a sleek and shiny finish.<br><br>
                    Why Get a Full Detail?<br>
                    üöó Enhance your car‚Äôs appearance & resale value<br>
                    ‚õ® Protect paint and interior from wear & damage<br>
                    ü¶† Remove bacteria, odors, and allergens<br>
                    ‚ú® Enjoy and show off a fresh, clean ride every day<br><br>
                    We can come to you! Book your detail today and experience the difference. üöó‚ú®
                </p>
                <a href="#" id="open-booking" class="book-now-btn">Book Now!</a>
            </div>
        </div>
    </div>

      <!-- Booking Modal -->
    <div id="booking-modal">
      <div class="modal-content">
        <button id="close-booking" class="close-button">&times;</button>
        <h2>Book a Detail</h2>
        <form id="booking-form" action="https://formsubmit.co/contact.curbside@gmail.com" method="POST">
          <input type="hidden" name="_captcha" value="false">

          <label for="book-name">Name:<span class="red-letter">*</span></label>
          <input type="text" id="book-name" name="name" required>

          <label for="book-email">Email:<span class="red-letter">*</span></label>
          <input type="email" id="book-email" name="email" required>

          <label for="book-phone">Phone:</label>
          <input type="tel" id="book-phone" name="phone">

          <label for="book-date">Preferred Date:<span class="red-letter">*</span></label>
          <input type="date" id="book-date" name="date" required>

          <label for="book-time">Preferred Time:<span class="red-letter">*</span></label>
          <select id="book-time" name="time" required>
            <option value="8am">8am</option>
            <option value="2pm">2pm</option>
            <option value="6pm">6pm</option>
          </select>

          <label for="book-message">Message (Optional):</label>
          <textarea id="book-message" name="message" rows="4"></textarea>

          <button type="submit">Submit</button>
        </form>
      </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../html/about.html">About</a></li>
                    <li><a href="../html/contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h4>Contact Us</h4>
                <p>Feel free to contact us <a href="../html/contact.html">here</a></p>
                <p>Location: Burnaby, BC</p>
            </div>
            <div class="footer-social">
                <h4>Follow Us</h4>
                <a href="https://www.instagram.com/curbsidecustomsgarage/?hl=en" class="social-icon" target="_blank">
                    <img src="../images/instagram.png" alt="Instagram">
                </a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 CurbsideCustoms. All rights reserved.</p>
        </div>
    </footer>

    <script>
const menuToggle = document.getElementById('hamburger-icon');
const hamburgerOverlay = document.getElementById('hamburger-overlay');
const hamburgerMenu = document.getElementById('hamburger-menu');

const openBooking = document.getElementById('open-booking');
const bookingModal = document.getElementById('booking-modal');
const closeBooking = document.getElementById('close-booking');
const bookingForm = document.getElementById('booking-form');

// ‚úÖ Form input fields
const bookName = document.getElementById('book-name');
const bookEmail = document.getElementById('book-email');
const bookPhone = document.getElementById('book-phone');
const bookDate = document.getElementById('book-date');
const bookTime = document.getElementById('book-time');
const bookMessage = document.getElementById('book-message');


// üåê Your backend API URL
const API_URL = 'https://curbside-customs-backend.onrender.com';

// üîì Open booking modal
openBooking.addEventListener('click', (e) => {
  e.preventDefault();
  updateTimeOptions(); // üëà refresh available times
  bookingModal.classList.add('open');
});


// ‚ùå Close modal
closeBooking.addEventListener('click', () => {
  bookingModal.classList.remove('open');
});
bookingModal.addEventListener('click', (e) => {
  if (e.target === bookingModal) {
    bookingModal.classList.remove('open');
  }
});

// üçî Hamburger menu toggle
menuToggle.addEventListener('click', () => {
  hamburgerOverlay.classList.add('open');
  hamburgerMenu.classList.add('open');
  document.body.classList.add('menu-open');
});
hamburgerOverlay.addEventListener('click', (e) => {
  if (!hamburgerMenu.contains(e.target)) {
    hamburgerOverlay.classList.remove('open');
    hamburgerMenu.classList.remove('open');
    document.body.classList.remove('menu-open');
  }
});

// üóìÔ∏è Update available times from backend
function updateTimeOptions() {
  const date = bookDate.value;
  if (!date) return;

  fetch(`${API_URL}/api/available?date=${date}`)
    .then(res => res.json())
    .then(bookedTimes => {
      for (const option of bookTime.options) {
        if (!option.value) continue;
        if (bookedTimes.includes(option.value)) {
          option.disabled = true;
          option.textContent = option.value === "custom"
            ? "Custom (already booked)"
            : `${option.value} (already booked)`;
        } else {
          option.disabled = false;
          option.textContent = option.value === "custom"
            ? "Custom (book in advance)"
            : option.value;
        }
      }
    })
    .catch(err => {
      console.error('Failed to fetch booked times:', err);
    });
}

bookDate.addEventListener('change', updateTimeOptions);

// üì§ Submit booking to backend
bookingForm.addEventListener('submit', (e) => {
  e.preventDefault();

  const bookingData = {
    name: bookName.value,
    email: bookEmail.value,
    phone: bookPhone.value,
    date: bookDate.value,
    time: bookTime.value,
    message: bookMessage.value
  };

  fetch(`${API_URL}/api/book`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(bookingData)
})
  .then(async res => {
    if (!res.ok) {
      const err = await res.text();
      throw new Error(err);
    }
    return res.json();
  })
  .then(data => {
    alert('‚úÖ Booking confirmed! Check your email.');
    bookingModal.classList.remove('open');
    updateTimeOptions();
  })
  .catch(err => {
    console.error('Booking error:', err);
    alert('‚ö†Ô∏è Could not connect to booking system.');
  });
});



// Run once on page load
document.addEventListener('DOMContentLoaded', updateTimeOptions);
</script>




</body>
</html>
